<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decision Tools ‚Äì Structured Decision Maker</title>
    <style>
        /* COLOR SYSTEM */
        :root {
            --primary: #2c5530;
            --secondary: #4a7c59;
            --accent: #8fbc8f;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --card-bg: #ffffff;
            --shadow: 0 3px 10px rgba(0,0,0,0.08);
            --border: #d1d9e6;
            --page-bg: #f5f7fa;
            --input-border: #c8d1e0;
        }

        /* BASE STYLES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: var(--page-bg);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* HEADER */
        .header {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            text-align: center;
            border: 1px solid var(--border);
        }

        .title {
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 400;
        }

        .subtitle {
            color: var(--gray);
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .method-badge {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* PATH SELECTION CARDS */
        .path-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .path-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
        }

        .path-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
            border-color: var(--accent);
        }

        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-title {
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .card-description {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.4;
            margin-bottom: 20px;
            flex-grow: 1;
        }

        .card-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            width: 100%;
            max-width: 180px;
            font-family: inherit;
        }

        .card-button:hover {
            background: var(--secondary);
        }

        /* SECTIONS */
        .section {
            display: none;
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--accent);
        }

        .back-button {
            background: var(--light-gray);
            color: var(--dark);
            border: 1px solid var(--border);
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-right: 15px;
            transition: all 0.2s;
        }

        .back-button:hover {
            background: var(--border);
        }

        .section-title {
            font-size: 1.5rem;
            color: var(--primary);
            flex-grow: 1;
        }

        /* FORM STYLES */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--input-border);
            border-radius: 6px;
            font-size: 1rem;
            font-family: inherit;
            background: white;
            transition: border-color 0.2s;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(143, 188, 143, 0.1);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
            line-height: 1.5;
        }

        .form-hint {
            font-size: 0.85rem;
            color: var(--gray);
            margin-top: 5px;
            font-style: italic;
        }

        /* BUTTONS */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s;
            font-weight: 600;
        }

        .btn:hover {
            background: var(--secondary);
        }

        .btn-secondary {
            background: var(--light-gray);
            color: var(--dark);
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        /* PATTERN GRID */
        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .pattern-card {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .pattern-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .pattern-title {
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .pattern-desc {
            color: var(--gray);
            font-size: 0.85rem;
            line-height: 1.4;
        }

        /* PROMPT OUTPUT */
        .prompt-output {
            background: white;
            padding: 20px;
            border-radius: 6px;
            margin: 20px 0;
            border: 1px solid var(--border);
        }

        .prompt-text {
            white-space: pre-wrap;
            word-break: break-word;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
            border: 1px solid #e9ecef;
            max-height: 400px;
            overflow-y: auto;
        }

        /* WARNING BOX */
        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
            border: 1px solid #ffeaa7;
            font-size: 0.9em;
        }

        .warning-title {
            color: #856404;
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.95em;
        }

        /* COPY BUTTON */
        .copy-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .copy-btn:hover {
            background: var(--secondary);
            transform: translateY(-1px);
        }

        .copy-btn.copied {
            background: #28a745;
        }

        /* SHARE SECTION */
        .share-section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 40px 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .share-section .section-title {
            text-align: center;
            border-bottom: none;
            margin-bottom: 10px;
        }

        #qrCodeDisplay {
            min-height: 220px;
            min-width: 220px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        /* SUPPORT SECTION */
        .support-section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 40px 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .availability-notice {
            background: #f0f7f0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid var(--border);
        }

        .principles-list {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
            border: 1px solid var(--border);
        }

        .principles-list ul {
            list-style: none;
            padding-left: 0;
        }

        .principles-list li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .principles-list li:before {
            content: "‚Ä¢";
            color: var(--accent);
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        /* DISCLAIMER */
        .disclaimer {
            background: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
            border-left: 4px solid #ffc107;
            font-size: 0.9rem;
            border: 1px solid #ffeaa7;
        }

        /* FOOTER */
        .footer {
            text-align: center;
            padding: 30px 0;
            color: var(--gray);
            font-size: 0.9rem;
            border-top: 1px solid var(--border);
            margin-top: 40px;
        }

        /* SHARE BUTTON */
        .share-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            margin: 5px;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .share-btn:hover {
            background: var(--secondary);
            transform: translateY(-1px);
        }

        .share-btn.copied {
            background: #28a745;
        }

        /* ANIMATIONS */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .title {
                font-size: 1.8rem;
            }
            
            .header {
                padding: 20px;
            }
            
            .path-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .path-card {
                padding: 20px;
            }
            
            .card-icon {
                font-size: 2rem;
                height: 50px;
            }
            
            .card-title {
                font-size: 1.2rem;
            }
            
            .section {
                padding: 20px;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .back-button {
                margin-right: 0;
                align-self: stretch;
                text-align: center;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .pattern-grid {
                grid-template-columns: 1fr;
            }
            
            .share-section {
                padding: 20px;
            }
            
            #qrCodeDisplay {
                min-height: 180px;
                min-width: 180px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- HEADER -->
    <div class="header">
        <h1 class="title">Decision Tools</h1>
        <p class="subtitle">Structured approaches for clear decision making</p>
        <div class="method-badge">AI Prompt Generator</div>
    </div>

    <!-- MAIN PATH SELECTION - THREE PATH SYSTEM -->
    <div class="path-grid" id="mainSelection">
        <!-- QUICK PATH -->
        <div class="path-card" data-path="quick">
            <div class="card-icon">üöÄ</div>
            <h2 class="card-title">Quick Decision Path</h2>
            <p class="card-description">
                For urgent situations. Get an AI prompt that helps with immediate decisions while preserving future options.
            </p>
            <button class="card-button" data-action="quick">Start Quick Path</button>
        </div>

        <!-- PATTERN PATH -->
        <div class="path-card" data-path="pattern">
            <div class="card-icon">üìö</div>
            <h2 class="card-title">Pattern Library</h2>
            <p class="card-description">
                Browse common scenarios. Get AI prompts for specific situations with built-in STOP conditions.
            </p>
            <button class="card-button" data-action="pattern">Browse Patterns</button>
        </div>

        <!-- DEEP PATH -->
        <div class="path-card" data-path="deep">
            <div class="card-icon">üîç</div>
            <h2 class="card-title">Deep Analysis Path</h2>
            <p class="card-description">
                For complex situations. Get an AI prompt for systematic observation and pattern identification.
            </p>
            <button class="card-button" data-action="deep">Start Deep Analysis</button>
        </div>
    </div>

    <!-- QUICK DECISION SECTION -->
    <section id="quickSection" class="section">
        <div class="section-header">
            <button class="back-button" data-back="main">‚Üê Back to Options</button>
            <h2 class="section-title">Quick Decision Path</h2>
        </div>

        <div class="warning-box">
            <div class="warning-title">‚ö†Ô∏è URGENT SITUATIONS ONLY</div>
            Use this when you need to make a decision quickly while preserving your ability to choose differently later.
        </div>

        <div class="form-group">
            <label class="form-label" for="quickSituation">What's the urgent situation?</label>
            <textarea class="form-textarea" id="quickSituation" placeholder="Describe what needs immediate attention..."></textarea>
            <p class="form-hint">Be specific about timing, pressure, and what happens if you don't act now.</p>
        </div>

        <div class="form-group">
            <label class="form-label" for="quickFocus">What must be preserved above all?</label>
            <select class="form-select" id="quickFocus">
                <option value="">Select what's most critical...</option>
                <option value="options">Future options and flexibility</option>
                <option value="safety">Physical/emotional safety</option>
                <option value="integrity">Personal/professional integrity</option>
                <option value="resources">Essential resources</option>
                <option value="relationships">Key relationships</option>
            </select>
        </div>

        <div class="button-group">
            <button class="btn-secondary" data-back="main">Back to Options</button>
            <button class="btn" id="generateQuick">Generate AI Prompt</button>
        </div>
    </section>

    <!-- PATTERN LIBRARY SECTION -->
    <section id="patternSection" class="section">
        <div class="section-header">
            <button class="back-button" data-back="main">‚Üê Back to Options</button>
            <h2 class="section-title">Pattern Library</h2>
        </div>

        <p style="margin-bottom: 20px; color: var(--gray);">
            Select a common scenario to get a specific AI prompt with built-in STOP conditions:
        </p>

        <div class="pattern-grid" id="patternGrid">
            <!-- Patterns loaded by JavaScript -->
        </div>

        <div class="button-group">
            <button class="btn-secondary" data-back="main">Back to Options</button>
        </div>
    </section>

    <!-- DEEP ANALYSIS SECTION -->
    <section id="deepSection" class="section">
        <div class="section-header">
            <button class="back-button" data-back="main">‚Üê Back to Options</button>
            <h2 class="section-title">Deep Analysis Path</h2>
        </div>

        <div class="warning-box">
            <div class="warning-title">üîç OBSERVATION FIRST</div>
            This approach helps you observe systematically before deciding. The AI will guide you through pattern identification.
        </div>

        <div class="form-group">
            <label class="form-label" for="deepSituation">Describe the situation neutrally</label>
            <textarea class="form-textarea" id="deepSituation" placeholder="Just the facts: who, what, when, where... Avoid interpretations."></textarea>
            <p class="form-hint">Start with observable facts only. We'll add interpretations in the AI conversation.</p>
        </div>

        <div class="form-group">
            <label class="form-label" for="deepPatterns">What patterns have you noticed?</label>
            <textarea class="form-textarea" id="deepPatterns" placeholder="Look for: Timing (when), Triggers (what starts it), Responses (what happens), Improvements/Worsening..."></textarea>
        </div>

        <div class="form-group">
            <label class="form-label" for="deepDomain">Primary area of life affected</label>
            <select class="form-select" id="deepDomain">
                <option value="">Select the main area...</option>
                <option value="health">Health & Wellbeing</option>
                <option value="work">Work & Career</option>
                <option value="financial">Financial Decisions</option>
                <option value="personal">Personal Development</option>
                <option value="relationships">Relationships & Family</option>
                <option value="community">Community & Social</option>
            </select>
        </div>

        <div class="button-group">
            <button class="btn-secondary" data-back="main">Back to Options</button>
            <button class="btn" id="generateDeep">Generate AI Prompt</button>
        </div>
    </section>

    <!-- RESULT SECTION -->
    <section id="resultSection" class="section">
        <div class="section-header">
            <button class="back-button" data-back="previous">‚Üê Back</button>
            <h2 class="section-title">Your AI Prompt</h2>
        </div>

        <div class="warning-box">
            <div class="warning-title">‚ö†Ô∏è STOP CONDITIONS INCLUDED</div>
            Every option in this prompt includes "Stop if" conditions. If any stop condition occurs, pause and reconsider.
        </div>

        <div class="prompt-output">
            <div class="prompt-text" id="promptTextDisplay">
                <!-- Prompt will appear here -->
            </div>
            <button class="copy-btn" id="copyPromptBtn">
                <span>Copy Prompt to Clipboard</span>
            </button>
            <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
                <strong>How to use this prompt:</strong><br>
                1. Click "Copy Prompt to Clipboard" above<br>
                2. Open ChatGPT, Claude, or any AI assistant<br>
                3. Paste the prompt and follow the AI's questions<br>
                4. After 3-5 exchanges, the AI will provide options with STOP conditions<br>
                5. You choose which option fits your situation
            </p>
        </div>

        <div class="button-group">
            <button class="btn-secondary" data-back="previous">Back</button>
            <button class="btn" onclick="startOver()">Start New Decision</button>
        </div>
    </section>

    <!-- DISCLAIMER -->
    <div class="disclaimer">
        <strong>Note:</strong> These AI prompts help you organize your own observations. They are not professional advice. For medical, legal, or financial matters, consult appropriate professionals. Your judgment guides all decisions.
    </div>

    <!-- SHARE SECTION -->
    <div class="share-section">
        <h2 class="section-title">Share This Tool</h2>
        
        <div style="text-align: center; margin: 25px 0;">
            <p style="margin-bottom: 20px; font-size: 1.1em;">
                <strong>Show the QR code below to someone in person:</strong><br>
                They can scan it with their phone camera
            </p>
            
            <!-- QR Code Placeholder -->
            <div id="qrCodeDisplay">
                <img src="chrome_qrcode_1767124099414.png" alt="Scan QR code for Decision Helper - decisiontools.ca" 
                     style="width: 200px; height: 200px; border-radius: 8px; border: 1px solid var(--border);">
                <p style="margin-top: 10px; font-size: 0.9em; color: var(--secondary);">
                    üì± Scan with phone camera<br>
                    <strong>https://decisiontools.ca</strong>
                </p>
            </div>
            
            <div style="margin-top: 20px;">
                <p><strong>Direct link to share:</strong></p>
                <div style="background: var(--light-gray); padding: 12px; border-radius: 6px; margin: 15px 0; word-break: break-all;">
                    https://decisiontools.ca
                </div>
                
                <div class="button-group" style="justify-content: center;">
                    <button class="share-btn" onclick="shareSite()" style="padding: 12px 25px; font-size: 1em;">
                        <span>üì± Share via Message/Email</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 25px; padding: 20px; background: #f0f7f0; border-radius: 8px;">
            <h4 style="color: var(--primary); margin-bottom: 10px;">How to Share:</h4>
            <ol style="padding-left: 20px;">
                <li><strong>In person:</strong> Show QR code on your screen for others to scan</li>
                <li><strong>Digitally:</strong> Share the link above via message or email</li>
                <li><strong>No accounts needed:</strong> Anyone can use it immediately</li>
                <li><strong>Works globally:</strong> Browser translation available</li>
            </ol>
            <p style="margin-top: 15px; font-style: italic; color: var(--secondary);">
                Share with someone facing a decision who could use clearer thinking methods.
            </p>
        </div>
    </div>

    <!-- SUPPORT SECTION -->
    <div class="support-section">
        <h2 class="section-title">How This Stays Available</h2>
        
        <div class="availability-notice">
            <h4>Current Status:</h4>
            <p><strong>‚úì Free to use</strong> ‚Ä¢ <strong>‚úì No accounts needed</strong> ‚Ä¢ <strong>‚úì Your copy to keep</strong></p>
            <p><strong>‚úì Official domain:</strong> decisiontools.ca</p>
            <p><strong>‚úì Contact:</strong> contact@decisiontools.ca</p>
            
            <p style="margin-top: 15px;">
                <em>Tool development in progress.<br>
                Optional support options coming in future updates.</em>
            </p>
        </div>
        
        <div class="principles-list">
            <h4>How This Tool Works:</h4>
            <ul>
                <li>Builds on what you can actually observe and track</li>
                <li>Respects your specific situation and choices</li>
                <li>Includes clear "stop if" safety conditions</li>
                <li>You maintain control and can adjust anytime</li>
                <li>No one excluded by inability to contribute</li>
                <li><strong>Privacy-first:</strong> Use your browser or preferred tool for translation</li>
            </ul>
        </div>
        
        <p style="margin-top: 20px; font-size: 0.9em; color: var(--gray);">
            <em>For now: Use it. Adapt it. Share it. That's support enough.</em>
        </p>
    </div>

    <!-- FOOTER -->
    <div class="footer">
        <p>Decision Tools | decisiontools.ca</p>
        <p style="margin-top: 8px; font-size: 0.9em;">Your observations ‚Ä¢ Your patterns ‚Ä¢ Your decisions</p>
        
        <!-- SHARE BUTTON -->
        <div style="margin: 20px 0;">
            <button class="share-btn" onclick="shareSite()">
                <span>üîó Share This Tool</span>
            </button>
            <p style="margin-top: 8px; font-size: 0.8em; color: var(--gray);">
                <em>Share with someone who could use clearer decision methods</em>
            </p>
        </div>
        
        <p style="margin-top: 15px; font-style: italic; color: var(--secondary);">
            Clear notes create clear choices. Track what matters.
        </p>
        
        <!-- VISITOR COUNTER -->
        <p style="margin-top: 10px; font-size: 0.8em; color: var(--gray);">
            Version 1.0 ‚Ä¢ Decision Tools ‚Ä¢ contact@decisiontools.ca
        </p>
        <p style="font-size: 0.7em; color: var(--gray); margin-top: 5px;">
            Page loaded <span id="viewCount">0</span> times on this device
        </p>
    </div>
</div>

<script>
// Initialize view counter
try {
    let views = localStorage.getItem('decisionToolsViews') || 0;
    views = parseInt(views) + 1;
    localStorage.setItem('decisionToolsViews', views);
    setTimeout(() => {
        const counterElement = document.getElementById('viewCount');
        if (counterElement) {
            counterElement.textContent = views.toLocaleString();
        }
    }, 100);
} catch(e) {
    setTimeout(() => {
        const counterElement = document.getElementById('viewCount');
        if (counterElement) {
            counterElement.textContent = 'many';
        }
    }, 100);
}

// PATTERN LIBRARY DATA with AI prompts and STOP conditions
const patterns = [
    {
        id: 'medical',
        title: 'Health & Symptoms',
        icon: 'üíä',
        description: 'Track symptoms, identify patterns, make informed healthcare choices',
        prompt: `I need help tracking and understanding my symptoms. Here's my situation: [USER_SITUATION]

I've noticed these patterns: [USER_PATTERNS]

Please guide me through this process:

PHASE 1: OBSERVATION QUESTIONS
Ask me specific questions to gather these facts:
‚Ä¢ What exactly happens? (observable symptoms only)
‚Ä¢ When does it happen? (timing, frequency, duration)
‚Ä¢ What were you doing before it started?
‚Ä¢ What have you tried that helped or didn't help?
‚Ä¢ How do you measure the intensity? (1-10 scale)

PHASE 2: PATTERN IDENTIFICATION
After I answer your questions, help me identify:
‚Ä¢ What patterns emerge from my answers
‚Ä¢ What seems connected to what
‚Ä¢ What's predictable vs random
‚Ä¢ Any timing or trigger patterns

PHASE 3: OPTION GENERATION
Based on my patterns, suggest 2-3 specific options. For each option include:
‚Ä¢ What it involves (specific actions)
‚Ä¢ What resources/time it requires
‚Ä¢ Expected timeline for seeing results
‚Ä¢ "Stop if [specific condition] occurs"
‚Ä¢ When to review and reconsider (suggest specific timeframe)

STOP IF ANY OF THESE OCCUR:
‚Ä¢ Symptoms require immediate medical attention
‚Ä¢ Pain becomes severe or unmanageable
‚Ä¢ New concerning symptoms appear
‚Ä¢ Healthcare professional says to stop current approach

Important: Ask questions for 3-5 exchanges to gather enough information, then provide options with clear stop conditions. I will choose which option fits my situation best.`
    },
    {
        id: 'work',
        title: 'Work & Professional',
        icon: 'üíº',
        description: 'Document workplace facts, recognize patterns, choose professional responses',
        prompt: `I need help navigating a work situation. Here's what's happening: [USER_SITUATION]

Patterns I've noticed: [USER_PATTERNS]

Please guide me through this process:

PHASE 1: OBSERVATION QUESTIONS
Ask me specific questions to gather these facts:
‚Ä¢ What exactly happened? (dates, who involved, what was said/done)
‚Ä¢ What work processes or policies apply?
‚Ä¢ What has been tried already and what were the outcomes?
‚Ä¢ What are the actual work requirements vs expectations?
‚Ä¢ What documentation exists?

PHASE 2: PATTERN IDENTIFICATION
After I answer your questions, help me identify:
‚Ä¢ Patterns in workplace interactions
‚Ä¢ What responses get what results
‚Ä¢ Timing or trigger patterns
‚Ä¢ Systemic vs individual issues

PHASE 3: OPTION GENERATION
Based on my patterns, suggest 2-3 specific professional options. For each option include:
‚Ä¢ What professional steps it involves
‚Ä¢ Required preparation or documentation
‚Ä¢ Expected outcomes and timelines
‚Ä¢ "Stop if [specific condition] occurs"
‚Ä¢ Review points for reconsideration

STOP IF ANY OF THESE OCCUR:
‚Ä¢ Workplace safety is compromised
‚Ä¢ Legal or ethical boundaries are crossed
‚Ä¢ Professional reputation is at serious risk
‚Ä¢ Health is being negatively affected

Important: Ask questions for 3-5 exchanges to understand the situation, then provide options with clear stop conditions. I will choose the professional approach that fits my situation.`
    },
    {
        id: 'financial',
        title: 'Financial Decisions',
        icon: 'üí∞',
        description: 'Track spending, identify patterns, make choices aligned with priorities',
        prompt: `I need help understanding my financial patterns. Here's my situation: [USER_SITUATION]

Patterns I've noticed: [USER_PATTERNS]

Please guide me through this process:

PHASE 1: OBSERVATION QUESTIONS
Ask me specific questions to gather these facts:
‚Ä¢ What specific financial situation concerns you? (amounts, frequency)
‚Ä¢ What are your fixed expenses vs discretionary spending?
‚Ä¢ What financial goals are most important right now?
‚Ä¢ What tracking have you already tried?
‚Ä¢ What income sources and timing exist?

PHASE 2: PATTERN IDENTIFICATION
After I answer your questions, help me identify:
‚Ä¢ Where money actually goes vs where you want it to go
‚Ä¢ Timing patterns in spending (weekly, monthly, seasonal)
‚Ä¢ Emotional vs necessity spending patterns
‚Ä¢ Opportunity costs of current spending

PHASE 3: OPTION GENERATION
Based on my patterns, suggest 2-3 specific financial options. For each option include:
‚Ä¢ What specific changes it involves
‚Ä¢ Required tracking or documentation
‚Ä¢ Expected financial impact and timeline
‚Ä¢ "Stop if [specific condition] occurs"
‚Ä¢ Review points (suggest weekly or monthly)

STOP IF ANY OF THESE OCCUR:
‚Ä¢ Essential needs aren't being met
‚Ä¢ Debt is increasing uncontrollably
‚Ä¢ Emergency fund drops below minimum
‚Ä¢ Better financial opportunity emerges

Important: Ask questions for 3-5 exchanges to understand the financial picture, then provide options with clear stop conditions. I will choose the financial approach that aligns with my priorities.`
    },
    {
        id: 'relationships',
        title: 'Relationships & Boundaries',
        icon: 'üë•',
        description: 'Define roles, track interactions, maintain healthy boundaries',
        prompt: `I need help with a relationship or boundary situation. Here's my situation: [USER_SITUATION]

Patterns I've noticed: [USER_PATTERNS]

Please guide me through this process:

PHASE 1: OBSERVATION QUESTIONS
Ask me specific questions to gather these facts:
‚Ä¢ What specific relationship situation exists?
‚Ä¢ What has been tried and what were the outcomes?
‚Ä¢ What are the actual needs vs wants?
‚Ä¢ What resources are available?
‚Ä¢ What are healthy boundaries for this situation?

PHASE 2: PATTERN IDENTIFICATION
After I answer your questions, help me identify:
‚Ä¢ What interactions are effective vs draining
‚Ä¢ Timing patterns in relationship dynamics
‚Ä¢ What boundaries work vs don't work
‚Ä¢ Where support systems could be strengthened

PHASE 3: OPTION GENERATION
Based on my patterns, suggest 2-3 specific boundary options. For each option include:
‚Ä¢ Specific boundary definitions
‚Ä¢ Communication approach
‚Ä¢ Required support limits
‚Ä¢ "Stop if [specific condition] occurs"
‚Ä¢ Regular self-check schedule

STOP IF ANY OF THESE OCCUR:
‚Ä¢ Your health is compromised
‚Ä¢ Interactions become one-sided
‚Ä¢ Better support system becomes available
‚Ä¢ Boundaries are consistently violated

Important: Ask questions for 3-5 exchanges to understand the relationship dynamics, then provide options with clear stop conditions. I will choose the boundaries that maintain healthy relationships.`
    },
    {
        id: 'routine',
        title: 'Daily Routines',
        icon: '‚è∞',
        description: 'Observe natural patterns, build sustainable daily stability',
        prompt: `I need help with daily routines or habits. Here's my situation: [USER_SITUATION]

Patterns I've noticed: [USER_PATTERNS]

Please guide me through this process:

PHASE 1: OBSERVATION QUESTIONS
Ask me specific questions to gather these facts:
‚Ä¢ What specific routine concerns you?
‚Ä¢ What daily patterns actually exist now?
‚Ä¢ What has been tried and what were the results?
‚Ä¢ What energy levels exist at different times?
‚Ä¢ What are the most important daily priorities?

PHASE 2: PATTERN IDENTIFICATION
After I answer your questions, help me identify:
‚Ä¢ Natural productive times vs low energy times
‚Ä¢ What routines work sustainably
‚Ä¢ Timing patterns in daily life
‚Ä¢ Where interruptions typically occur

PHASE 3: OPTION GENERATION
Based on my patterns, suggest 2-3 specific routine options. For each option include:
‚Ä¢ Specific daily structure
‚Ä¢ Built-in flexibility points
‚Ä¢ Expected adjustments needed
‚Ä¢ "Stop if [specific condition] occurs"
‚Ä¢ Weekly review schedule

STOP IF ANY OF THESE OCCUR:
‚Ä¢ Health is negatively affected
‚Ä¢ Essential needs aren't met
‚Ä¢ Better routine approach emerges
‚Ä¢ Life circumstances change significantly

Important: Ask questions for 3-5 exchanges to understand daily patterns, then provide options with clear stop conditions. I will choose the routine that creates sustainable daily stability.`
    }
];

// DOM Elements
const mainSelection = document.getElementById('mainSelection');
const quickSection = document.getElementById('quickSection');
const patternSection = document.getElementById('patternSection');
const deepSection = document.getElementById('deepSection');
const resultSection = document.getElementById('resultSection');
const patternGrid = document.getElementById('patternGrid');
const copyButton = document.getElementById('copyPromptBtn');
const promptTextDisplay = document.getElementById('promptTextDisplay');

// State Management
let currentPath = 'main';
let currentPrompt = '';
let previousSection = '';

// Initialize
function init() {
    loadPatterns();
    setupEventListeners();
    showSection('main');
}

// Load patterns into grid
function loadPatterns() {
    patternGrid.innerHTML = patterns.map(pattern => `
        <div class="pattern-card" data-pattern="${pattern.id}">
            <div style="font-size: 1.8rem; margin-bottom: 10px;">${pattern.icon}</div>
            <h3 class="pattern-title">${pattern.title}</h3>
            <p class="pattern-desc">${pattern.description}</p>
            <div style="margin-top: 10px; font-size: 0.8rem; color: var(--gray);">
                Includes: STOP conditions ‚Ä¢ Pattern identification ‚Ä¢ Clear options
            </div>
        </div>
    `).join('');
}

// Setup event listeners
function setupEventListeners() {
    // Main card buttons
    document.querySelectorAll('.card-button').forEach(button => {
        button.addEventListener('click', function() {
            const path = this.getAttribute('data-action');
            navigateToPath(path);
        });
    });

    // Back buttons
    document.querySelectorAll('[data-back]').forEach(button => {
        button.addEventListener('click', function() {
            const target = this.getAttribute('data-back');
            if (target === 'previous') {
                showSection(previousSection);
            } else {
                showSection(target);
            }
        });
    });

    // Pattern cards
    patternGrid.addEventListener('click', function(e) {
        const patternCard = e.target.closest('.pattern-card');
        if (patternCard) {
            const patternId = patternCard.getAttribute('data-pattern');
            loadPattern(patternId);
        }
    });

    // Generate buttons
    document.getElementById('generateQuick').addEventListener('click', generateQuickPrompt);
    document.getElementById('generateDeep').addEventListener('click', generateDeepPrompt);

    // Copy button
    copyButton.addEventListener('click', copyPromptToClipboard);

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && currentPath !== 'main') {
            showSection('main');
        }
        if (e.ctrlKey && e.key === 'Enter') {
            if (currentPath === 'quick') generateQuickPrompt();
            if (currentPath === 'deep') generateDeepPrompt();
        }
    });
}

// Navigation - FIXED VERSION
function navigateToPath(path) {
    previousSection = currentPath;
    currentPath = path;
    showSection(path);
}

function showSection(section) {
    // Hide all sections
    [quickSection, patternSection, deepSection, resultSection].forEach(s => {
        s.classList.remove('active');
    });
    
    // Show main cards OR content section
    if (section === 'main') {
        mainSelection.style.display = 'grid';
    } else {
        mainSelection.style.display = 'none';
        const targetSection = document.getElementById(section + 'Section');
        if (targetSection) {
            targetSection.classList.add('active');
        }
    }
    
    currentPath = section;
    
    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Load pattern
function loadPattern(patternId) {
    const pattern = patterns.find(p => p.id === patternId);
    if (!pattern) return;

    currentPrompt = pattern.prompt.replace('[USER_SITUATION]', 'Describe your specific situation to the AI.')
                                  .replace('[USER_PATTERNS]', 'Share any patterns you\'ve noticed with the AI.');
    
    promptTextDisplay.textContent = currentPrompt;
    previousSection = 'pattern';
    showSection('result');
}

// Generate quick prompt
function generateQuickPrompt() {
    const situation = document.getElementById('quickSituation').value.trim();
    const focus = document.getElementById('quickFocus').value;

    if (!situation) {
        alert('Please describe the urgent situation.');
        document.getElementById('quickSituation').focus();
        return;
    }

    if (!focus) {
        alert('Please select what must be preserved.');
        return;
    }

    const focusLabels = {
        'options': 'future options and flexibility',
        'safety': 'physical/emotional safety',
        'integrity': 'personal/professional integrity',
        'resources': 'essential resources',
        'relationships': 'key relationships'
    };

    currentPrompt = `I need help with an urgent decision. Here's the situation: ${situation}

The most critical thing to preserve is: ${focusLabels[focus]}

Please guide me through this URGENT decision process:

PHASE 1: IMMEDIATE OBSERVATION (Next 60 minutes)
Ask me specific questions to gather these urgent facts:
‚Ä¢ What's the REAL deadline? (Not the stated one)
‚Ä¢ What's the minimum acceptable outcome?
‚Ä¢ What absolutely cannot be lost?
‚Ä¢ What information is essential vs nice-to-have?

PHASE 2: OPTION IDENTIFICATION
After I answer your questions, help me identify:
‚Ä¢ All possible options (even "unacceptable" ones)
‚Ä¢ What preserves my ability to choose differently later
‚Ä¢ What can be reversed or adjusted
‚Ä¢ What must be decided now vs can wait

PHASE 3: URGENT ACTION PLAN
Based on my answers, suggest 2-3 specific urgent options. For each option include:
‚Ä¢ Immediate next steps (next 1-24 hours)
‚Ä¢ What it preserves vs risks
‚Ä¢ "Stop if [specific condition] occurs"
‚Ä¢ Review point within 24 hours

STOP IF ANY OF THESE OCCUR:
‚Ä¢ Core safety is compromised
‚Ä¢ Essential information is unavailable
‚Ä¢ Pressure exceeds reasonable limits
‚Ä¢ Exit paths are being blocked
‚Ä¢ Better option emerges immediately

Important: Ask questions for 2-3 exchanges to understand the urgency, then provide options with clear stop conditions. I will choose which urgent approach fits my situation.`;

    promptTextDisplay.textContent = currentPrompt;
    previousSection = 'quick';
    showSection('result');
}

// Generate deep prompt
function generateDeepPrompt() {
    const situation = document.getElementById('deepSituation').value.trim();
    const patternsText = document.getElementById('deepPatterns').value.trim();
    const domain = document.getElementById('deepDomain').value;

    if (!situation) {
        alert('Please describe the situation.');
        document.getElementById('deepSituation').focus();
        return;
    }

    if (!domain) {
        alert('Please select the primary area affected.');
        return;
    }

    const domainLabels = {
        'health': 'Health & Wellbeing',
        'work': 'Work & Career',
        'financial': 'Financial Decisions',
        'personal': 'Personal Development',
        'relationships': 'Relationships & Family',
        'community': 'Community & Social'
    };

    currentPrompt = `I need help with systematic observation and analysis. Here's my situation: ${situation}

Patterns I've started to notice: ${patternsText || 'I need help identifying patterns through observation.'}

Primary area affected: ${domainLabels[domain]}

Please guide me through this DEEP ANALYSIS process:

PHASE 1: SYSTEMATIC OBSERVATION (Week 1)
Ask me specific questions to establish what to observe:
‚Ä¢ What specific facts should I document daily?
‚Ä¢ What timing patterns should I track?
‚Ä¢ What triggers or context should I note?
‚Ä¢ What improvement/worsening indicators should I watch for?

PHASE 2: PATTERN ANALYSIS (Week 2)
After I provide my observations, help me identify:
‚Ä¢ What patterns emerge from the data
‚Ä¢ What connections exist between different elements
‚Ä¢ What's predictable vs random
‚Ä¢ Where leverage points might exist

PHASE 3: INFORMED OPTION DEVELOPMENT (Week 3)
Based on my observed patterns, suggest 2-3 specific options. For each option include:
‚Ä¢ What it's based on (which patterns)
‚Ä¢ Required steps and resources
‚Ä¢ Expected outcomes and adjustments
‚Ä¢ "Stop if [specific condition] occurs"
‚Ä¢ Review schedule based on observation

STOP IF ANY OF THESE OCCUR:
‚Ä¢ Observation reveals safety concerns
‚Ä¢ Patterns change fundamentally
‚Ä¢ Better information source becomes available
‚Ä¢ Circumstances change requiring different approach

Important: Start by asking questions about what to observe. After I provide observations, help identify patterns, then suggest options with stop conditions. I will choose based on the evidence.`;

    promptTextDisplay.textContent = currentPrompt;
    previousSection = 'deep';
    showSection('result');
}

// Copy prompt to clipboard
function copyPromptToClipboard() {
    if (!currentPrompt) {
        alert('No prompt generated yet. Please complete a path first.');
        return;
    }

    const btnText = copyButton.querySelector('span');
    
    navigator.clipboard.writeText(currentPrompt)
        .then(() => {
            btnText.textContent = 'Copied! ‚úì';
            copyButton.classList.add('copied');
            setTimeout(() => {
                btnText.textContent = 'Copy Prompt to Clipboard';
                copyButton.classList.remove('copied');
            }, 2000);
        })
        .catch(err => {
            // Fallback
            const textarea = document.createElement('textarea');
            textarea.value = currentPrompt;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);

            btnText.textContent = 'Copied! ‚úì';
            copyButton.classList.add('copied');
            setTimeout(() => {
                btnText.textContent = 'Copy Prompt to Clipboard';
                copyButton.classList.remove('copied');
            }, 2000);
        });
}

// SHARE SITE FUNCTION (from current version)
function shareSite() {
    const url = 'https://decisiontools.ca';
    const title = 'Decision Tools';
    const text = 'AI prompt generator for structured decision making. No accounts needed.';
    
    const shareBtn = document.querySelector('.share-btn span');
    
    const fullText = `${title}\n\n${text}\n\n${url}`;
    
    if (navigator.share) {
        navigator.share({
            title: title,
            text: text,
            url: url,
        })
        .then(() => {
            shareBtn.textContent = 'Shared! ‚úì';
            setTimeout(() => {
                shareBtn.textContent = 'üîó Share This Tool';
            }, 2000);
        })
        .catch(() => {
            copyToClipboard(fullText, shareBtn);
        });
    } else {
        copyToClipboard(fullText, shareBtn);
    }
}

function copyToClipboard(text, buttonElement) {
    navigator.clipboard.writeText(text)
        .then(() => {
            buttonElement.textContent = 'Link Copied! ‚úì';
            buttonElement.parentElement.classList.add('copied');
            
            setTimeout(() => {
                buttonElement.textContent = 'üîó Share This Tool';
                buttonElement.parentElement.classList.remove('copied');
            }, 2000);
        })
        .catch(err => {
            prompt('Copy this link to share:', text);
        });
}

// Start over
function startOver() {
    document.getElementById('quickSituation').value = '';
    document.getElementById('quickFocus').selectedIndex = 0;
    document.getElementById('deepSituation').value = '';
    document.getElementById('deepPatterns').value = '';
    document.getElementById('deepDomain').selectedIndex = 0;
    
    showSection('main');
    currentPrompt = '';
}

// Initialize
document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
